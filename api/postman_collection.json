{
  "info": {
    "name": "Ecommerce API Prisma JS",
    "_postman_id": "e1d9a4a9-0000-0000-0000-000000000001",
    "description": "Coleção de endpoints para testes",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Health",
      "request": { "method": "GET", "url": "{{baseUrl}}/health" }
    },
    {
      "name": "Auth - Register",
      "request": {
        "method": "POST",
        "header": [{ "key": "Content-Type", "value": "application/json" }],
        "body": {
          "mode": "raw",
          "raw": "{\"name\": \"Cliente\", \"email\": \"cliente@example.com\", \"password\": \"123456\", \"role\": \"CLIENT\"}"
        },
        "url": "{{baseUrl}}/auth/register"
      }
    },
    {
      "name": "Auth - Login",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "var data = pm.response.json();",
              "if (data && data.token) { pm.environment.set('token', data.token); }"
            ]
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [{ "key": "Content-Type", "value": "application/json" }],
        "body": {
          "mode": "raw",
          "raw": "{\"email\": \"cliente@example.com\", \"password\": \"123456\"}"
        },
        "url": "{{baseUrl}}/auth/login"
      }
    },
    {
      "name": "Users - Me",
      "request": {
        "method": "GET",
        "header": [{ "key": "Authorization", "value": "Bearer {{token}}" }],
        "url": "{{baseUrl}}/users/me"
      }
    },
    {
      "name": "Users - List (ADMIN)",
      "request": {
        "method": "GET",
        "header": [{ "key": "Authorization", "value": "Bearer {{token}}" }],
        "url": "{{baseUrl}}/users"
      }
    },
    {
      "name": "Products - List",
      "request": { "method": "GET", "url": "{{baseUrl}}/products" }
    },
    {
      "name": "Products - Get by ID",
      "request": { "method": "GET", "url": "{{baseUrl}}/products/1" }
    },
    {
      "name": "Products - Get Image by ID",
      "request": { "method": "GET", "url": "{{baseUrl}}/products/1/image" }
    },
    {
      "name": "Products - Create (JSON com imageBase64)",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Authorization", "value": "Bearer {{token}}" },
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"title\": \"W59 Mini\",\n  \"description\": \"Smartwatch compacto.\",\n  \"price\": 199.90,\n  \"stock\": 20,\n  \"imageBase64\": \"iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAuMB9o3xq2sAAAAASUVORK5CYII=\",\n  \"imageMime\": \"image/png\",\n  \"imageName\": \"pixel.png\"\n}"
        },
        "url": "{{baseUrl}}/products"
      }
    },
    {
      "name": "Products - Update (JSON com imageBase64 opcional)",
      "request": {
        "method": "PUT",
        "header": [
          { "key": "Authorization", "value": "Bearer {{token}}" },
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"title\": \"W59 Mini (atualizado)\",\n  \"price\": 189.90,\n  \"stock\": 30,\n  \"imageBase64\": null,\n  \"imageMime\": null,\n  \"imageName\": null\n}"
        },
        "url": "{{baseUrl}}/products/1"
      }
    },
    {
      "name": "Orders - Create",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Authorization", "value": "Bearer {{token}}" },
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\"items\": [{\"productId\": 1, \"quantity\": 1}], \"shippingAddress\": \"Rua Exemplo, 123 - Barreira/CE\", \"payment\": {\"holderName\": \"Fulano\", \"cardNumber\": \"4111111111111111\", \"expMonth\": 12, \"expYear\": 2030, \"cvv\": \"123\"}}"
        },
        "url": "{{baseUrl}}/orders"
      }
    },
    {
      "name": "Orders - List (meus)",
      "request": {
        "method": "GET",
        "header": [{ "key": "Authorization", "value": "Bearer {{token}}" }],
        "url": "{{baseUrl}}/orders"
      }
    }
  ],
  "event": [],
  "variable": [
    { "key": "baseUrl", "value": "http://localhost:3000" },
    { "key": "token", "value": "" }
  ]
}
